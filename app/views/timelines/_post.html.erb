<%= javascript_pack_tag 'timeline/main', 'data-turbolinks-track': 'reload' %>
<style>
    #back {
        display: none;
        background: rgba(0, 0, 0, 0.5);
        position: absolute;
        left: 0;
        top: 0;
        z-index: 10000;
    }
</style>
<div class="panel-content panel-activity">
  <div class="d-flex text-muted">
    <%= link_to profile_path(user.find(post.userid).userid), style: "color:black" do %>
      <% if user.find(post.userid).image.nil? %>
        <%= image_tag "/user_images/default_icon.png", class: "icon bd-placeholder-img flex-shrink-0 me-2 rounded", width: "40px", height: "40px" %>
      <% else %>
        <%= image_tag "/user_images/#{user.find(post.userid).image}", class: "icon bd-placeholder-img flex-shrink-0 me-2 rounded", width: "40px", height: "40px" %>
      <% end %>
    <% end %>


    <p class="pb-3 mb-0 lh-sm w-100">
      <strong class="text-dark" style="font-size:20px;margin: 0"><%= user.find(post.userid).nickname %></strong>
      <span class="text-gray small" style="margin: 0">@<%= user.find(post.userid).userid %></span>
      <span class="text-gray small"><i class="far fa-clock clock-icon"></i><%= time_ago_in_words(post.created_at) %></span>
      <br/>
      <br/>
      <span class="spans text-dark" style="font-size:18px; margin: 0;"><%= html_escape(html_with_link_to_hashtag((post.content))).gsub(/\r\n|\r|\n/, "<br />").html_safe %></span>
      <br/>
    </p>
  </div>
  <div class="d-flex justify-content-between" style="margin-left: 50px">
    <% if post.image? %>
      <%= image_tag post.image.url, style: "width: 200px; height: 200px;" , "data-lity" => "data-lity"%>
    <% end %>
  </div>

  <div class="d-flex justify-content-between">

    <div style="margin-left: 50px">
      <span class="likes">
        <% if current_user.liked_by?(post.id) %>
          <%= link_to timeline_like_path(post.id, current_user.id), method: :delete, remote: true, :disabled => true do %>
            <i class="fas fa-heart"></i>
          <% end %>
          <%= post.likes.count %>
        <% else %>
          <%= link_to timeline_likes_path(post.id), method: :post, remote: true, :disabled => true do %>
            <i class="far fa-heart"></i>
          <% end %>
          <%= post.likes.count %>
        <% end %>
      </span>
      <span class="comments">
        <%= link_to timeline_path(post.id) do %>
          <i class="far fa-comment-alt" style="height: 15.5px"></i>
        <% end %>
        <%= post.comments.count %>
      </span>
    </div>

    <div>
      <% if post.userid == current_user.id %>
        <%= link_to(timeline_path(post.id), method: :delete) do %>
          <i class="far fa-trash-alt"></i>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

